function createDiagram(e,l,n,i){let a="#fillArrows: true\n#lineWidth: 2\n#fill:#569AE5\n#background: white\n#acyclicer: greedy\n#ranker: tight-tree\n#.data: visual=database fill=#EBDAF9\n#.trigger: visual=roundrect fill=#569AE5\n#.if: visual=rhomb fill=#2596be\n#.switch: visual=ellipse fill=#2596be\n#.scope: visual=frame fill=#808080\n#.foreach: visual=transceiver fill=#00C1A0\n#.until: visual=sender fill=#00C1A0\n#.var: visual=input fill=#9925be\n#.terminate: visual=receiver fill=#cc4747\n#.var: visual=input fill=#EBDAF9\n";return e.forEach((e=>{let l=e.position.replaceAll("||","").substring(1,e.position.length-1).split("|"),t=e.positionIndex.substring(1,e.positionIndex.length).split("|"),r=e.positionType.substring(1,e.positionType.length).split("|");l.forEach(((p,c)=>{if(l.length>0&&""!=t[c]&&r.length==l.length&&null!=p&&""!=p){let l,s,o="";"Switch"!=r[c]&&"If"!=r[c]&&"Scope"!=r[c]&&"Foreach"!=r[c]&&"Until"!=r[c]||"Internal"==e.positionInfo?(s="->",o=e.branch):s="--:>";let g=i[parseInt(t[c])-1];l="Switch"==r[c]?"\n[<switch>"+p.replace(/[":\[|{}()\]]+/g,"")+"]"+s+" "+o:"If"==r[c]?"\n[<if>"+p.replace(/[":\[|{}()\]]+/g,"")+"]"+s+" "+o:"Foreach"==r[c]?"\n[<foreach>"+p.replace(/[":\[|{}()\]]+/g,"")+"]"+s:"Until"==r[c]?"\n[<until>"+p.replace(/[":\[|{}()\]]+/g,"")+"]"+s:"Scope"==r[c]?"\n[<scope>"+p.replace(/[":\[|{}()\]]+/g,"")+"]"+s:"trigger"==p.replace(/[":\[|{}()\]]+/g,"")?"\n[<trigger> *"+n+"]"+s:"Terminate"==p.replace(/[":\[|{}()\]]+/g,"")?"\n[<terminate>"+p.replace(/[":\[|{}()\]]+/g,"")+"]"+s:g.type.includes("Variable")||g.type.includes("Compose")||r[c].includes("Variable")||r[c].includes("Compose")?"\n[<var>"+p.replace(/[":\[|{}()\]]+/g,"")+"]"+s:"Table"==r[c]||"ParseJson"==r[c]||"Select"==r[c]||"Join"==r[c]||"Query"==r[c]?"\n[<data>"+p.replace(/[":\[|{}()\]]+/g,"")+"]"+s:"\n["+p.replace(/[":\[|{}()\]]+/g,"")+"]"+s,l="Switch"==e.type?l+"[<switch>"+e.name.replace(/[":\[|{}()\]]+/g,"")+"]":"If"==e.type?l+"[<if>"+e.name.replace(/[":\[|{}()\]]+/g,"")+"]":"Foreach"==e.type?l+"[<foreach>"+e.name.replace(/[":\[|{}()\]]+/g,"")+"]":"Until"==e.type?l+"[<until>"+e.name.replace(/[":\[|{}()\]]+/g,"")+"]":"Scope"==e.type?l+"[<scope>"+e.name.replace(/[":\[|{}()\]]+/g,"")+"]":"Terminate"==e.type?l+"[<terminate>"+e.name.replace(/[":\[|{}()\]]+/g,"")+"]":e.type.includes("Variable")||e.type.includes("Compose")?l+"[<var>"+e.name.replace(/[":\[|{}()\]]+/g,"")+"]":"Table"==e.type||"ParseJson"==e.type||"Select"==e.type||"Join"==e.type||"Query"==e.type||"Table"==e.type||"ParseJson"==e.type||"Select"==e.type||"Join"==e.type||"Query"==e.type?l+"[<data>"+e.name.replace(/[":\[|{}()\]]+/g,"")+"]":l+"["+e.name.replace(/[":\[|{}()\]]+/g,"")+"]",a+=l}}))})),a}