let bResetStorage=!1;function loadPlatform(e){let t=localStorage.getItem("reset");null==t||bResetStorage||t<iResetStorage&&(bResetStorage=!0,chrome.storage.sync.clear(),e.innerHTML="Config Reset to defaults, please re-upload if required",e.style.color="red"),localStorage.setItem("reset",iResetStorage),null==localStorage.getItem("complexity")||bResetStorage?(localStorage.setItem("complexity",JSON.stringify(aComplexityTemplate)),aComplexity=aComplexityTemplate.slice()):aComplexity=JSON.parse(localStorage.getItem("complexity")),null==localStorage.getItem("ratings")||bResetStorage?(localStorage.setItem("ratings",JSON.stringify(oRatingsTemplate)),oRatings=oRatingsTemplate):oRatings=JSON.parse(localStorage.getItem("ratings")),null==localStorage.getItem("scoring")||bResetStorage?(localStorage.setItem("scoring",JSON.stringify(aScoringTemplate)),aScoring=aScoringTemplate.slice(0)):aScoring=JSON.parse(localStorage.getItem("scoring")),null==localStorage.getItem("naming")||bResetStorage?(localStorage.setItem("naming",JSON.stringify(oNamingTemplate)),oNaming=oNamingTemplate):oNaming=JSON.parse(localStorage.getItem("naming")),null==localStorage.getItem("references")||bResetStorage?(localStorage.setItem("references",JSON.stringify(oConfigReferenceTemplate)),oConfigReference=oConfigReferenceTemplate):oConfigReference=JSON.parse(localStorage.getItem("references")),null==localStorage.getItem("saved")||null==localStorage.getItem("definition")||bResetStorage?(oSaved=null,oSavedDef=null):(oSaved=JSON.parse(localStorage.getItem("saved")),oSavedDef=JSON.parse(localStorage.getItem("definition"))),localStorage.setItem("naming",JSON.stringify(oNamingTemplate)),localStorage.setItem("complexity",JSON.stringify(aComplexityTemplate))}function AddCompare(){sessionStorage.setItem("compare",JSON.stringify(sDefinitionParsed)),document.getElementById("addCompare-button").style="color: red;"}function OpenCompare(){let e,t=[],a=changeTemplate;const o=sessionStorage.getItem("compare");if(null!=o){e=JSON.parse(o);let n=DeepDiff(sDefinitionParsed,e);null==n?n="No differences found":t=n,i=sessionStorage.getItem("windowCounter");let r="",l="";const s='<u>Key</u><br> kind - indicates the kind of change; will be one of the following:<br> kN - indicates a newly added property/element<br> kD - indicates a property/element was deleted<br> kE - indicates a property/element was edited<br> kA - indicates a change occurred within an array<br> kpath - the property path (from the left-hand-side root)<br> klhs - the value on the left-hand-side of the comparison (undefined if kind === "N")<br> krhs - the value on the right-hand-side of the comparison (undefined if kind === "D")<br> kindex - when kind === "A", indicates the array index where the change occurred<br> kitem - when kind === "A", contains a nested change record indicating the change that occurred at the array index<br><br>';let g='<table class="mui-table mui-table--bordered" id="changeTable"><thead><tr><th>Type</th><th>Path</th><th>First Flow</th><th>Second Flow</th></tr></thead><tbody>';t.forEach((e=>{r=null!=e.lhs?JSON.stringify(e.lhs)+"</td><td>":"</td><td>",l=null!=e.rhs?JSON.stringify(e.rhs)+"</td>":"<td>",g+="<tr><td style ='width:40px' id='"+e.kind+"-IN'>"+e.kind+"</td><td>"+JSON.stringify(e.path)+"</td><td>"+r+l+"</tr>"})),g+="</tbody></table><br>",a=a.replace("{flowName}",pLoading.innerText),a=a.replace("{date}",getToday()),a=a.replace("{json}",s+JSON.stringify(n,void 0,2)),sessionStorage.setItem("changes",a.replace("{changeTable}",g));window.open("changes.html","Comparison"+(new Date).getTime()+i);i++,sessionStorage.setItem("windowCounter",i),sessionStorage.getItem("compare").clear(),document.getElementById("addCompare-button").style="color: #585858;"}}function SaveData(){localStorage.setItem("saved",JSON.stringify(removeCircularReferences(oReport))),localStorage.setItem("definition",JSON.stringify(sDefinitionParsed));const e={name:oReport.name,id:oReport.id,data:oReport.actionArray};sessionStorage.setItem("diagram",JSON.stringify(removeCircularReferences(e)))}function ResetConfigs(){localStorage.setItem("complexity",JSON.stringify(aComplexityTemplate)),localStorage.setItem("ratings",JSON.stringify(oRatingsTemplate)),localStorage.setItem("score",JSON.stringify(aScoringTemplate)),localStorage.setItem("naming",JSON.stringify(oNamingTemplate)),localStorage.setItem("scoring",JSON.stringify(aScoringTemplate)),localStorage.setItem("references",JSON.stringify(oConfigReferenceTemplate)),aComplexity=aComplexityTemplate.slice(),oRatings=oRatingsTemplate,aScoring=aScoringTemplate.slice(0),oNaming=oNamingTemplate,oConfigReference=oConfigReferenceTemplate,pLoading.innerHTML="Config Reset to defaults"}function UpdateConfigs(){localStorage.setItem("complexity",JSON.stringify(aComplexity)),localStorage.setItem("ratings",JSON.stringify(oRatings)),localStorage.setItem("score",JSON.stringify(aScoring)),localStorage.setItem("naming",JSON.stringify(oNaming)),localStorage.setItem("scoring",JSON.stringify(aScoring)),localStorage.setItem("references",JSON.stringify(oConfigReference))}